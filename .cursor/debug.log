{"id": "log_backtest_result_1974296057168", "timestamp": 1766227750266.5046, "location": "position_sizer.py:159", "message": "backtest result received", "data": {"symbol": "YFI/USDT", "backtest_result_type": "<class 'dict'>", "backtest_result_keys": ["trades", "equity_curve", "metrics", "total_time"], "backtest_result_is_none": false}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "B"}
{"id": "log_metrics_extracted_1974296057168", "timestamp": 1766227750266.6763, "location": "position_sizer.py:162", "message": "metrics extracted from backtest", "data": {"symbol": "YFI/USDT", "metrics_type": "<class 'dict'>", "metrics_keys": ["win_rate", "avg_win", "avg_loss", "total_return", "sharpe_ratio", "max_drawdown", "num_trades", "profit_factor"], "metrics_is_empty": false, "has_equity_curve": true, "equity_curve_len": 360}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "B"}
{"id": "log_kelly_input_1974296057168", "timestamp": 1766227750340.8757, "location": "position_sizer.py:165", "message": "kelly calculation input", "data": {"symbol": "YFI/USDT", "metrics": {"win_rate": 0.5, "avg_win": 0.01874768083045873, "avg_loss": 0.014173951018832764, "total_return": 0.0003656496902798608, "sharpe_ratio": 2.2726377066467, "max_drawdown": -4.7505778172271675, "num_trades": 16, "profit_factor": 1.3226855945493887}, "metrics_keys": ["win_rate", "avg_win", "avg_loss", "total_return", "sharpe_ratio", "max_drawdown", "num_trades", "profit_factor"]}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "A"}
{"id": "log_kelly_input_1974298326560", "timestamp": 1766227750342.1487, "location": "kelly_calculator.py:206", "message": "calculate_kelly_from_metrics input", "data": {"metrics_keys": ["win_rate", "avg_win", "avg_loss", "total_return", "sharpe_ratio", "max_drawdown", "num_trades", "profit_factor"], "metrics_type": "<class 'dict'>", "metrics_is_none": false}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "A"}
{"id": "log_kelly_values_1974298326560", "timestamp": 1766227750343.3967, "location": "kelly_calculator.py:212", "message": "extracted metrics values", "data": {"win_rate": 0.5, "avg_win": 0.01874768083045873, "avg_loss": 0.014173951018832764, "num_trades": 16}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "A"}
{"id": "log_kelly_lower_bound_adjusted_1974298326560", "timestamp": 1766227750345.2324, "location": "kelly_calculator.py:125", "message": "lower bound too conservative, using adjusted mean", "data": {"lower_bound": 0.28864324791699886, "posterior_mean": 0.5, "num_trades": 16, "adjusted_win_rate": 0.45}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "A"}
{"id": "log_kelly_bayesian_1974298326560", "timestamp": 1766227750345.7732, "location": "kelly_calculator.py:125", "message": "bayesian kelly calculation", "data": {"num_wins": 8, "num_losses": 8, "posterior_alpha": 10.0, "posterior_beta": 10.0, "posterior_mean": 0.5, "lower_bound": 0.28864324791699886, "upper_bound": 0.7113567520830011, "conservative_win_rate": 0.45}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "A"}
{"id": "log_kelly_formula_input_1974298326560", "timestamp": 1766227750346.2625, "location": "kelly_calculator.py:132", "message": "kelly formula inputs", "data": {"b": 1.3226855945493887, "p": 0.45, "q": 0.55, "p_times_b": 0.5952085175472249, "p_times_b_minus_q": 0.04520851754722488}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "A"}
{"id": "log_kelly_full_1974298326560", "timestamp": 1766227750346.8535, "location": "kelly_calculator.py:134", "message": "full kelly calculated", "data": {"full_kelly": 0.034179337654785966, "full_kelly_is_negative": false}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "A"}
{"id": "log_kelly_fractional_1974298326560", "timestamp": 1766227750346.9639, "location": "kelly_calculator.py:137", "message": "fractional kelly", "data": {"kelly_fraction": 0.008544834413696491, "fractional_kelly": 0.25, "kelly_fraction_is_negative": false}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "A"}
{"id": "log_kelly_bounds_1974298326560", "timestamp": 1766227750347.1514, "location": "kelly_calculator.py:140", "message": "kelly after bounds", "data": {"kelly_before_bounds": 0.008544834413696491, "kelly_after_bounds": 0.008544834413696491, "min_fraction": 0.0, "max_fraction": 0.25}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "A"}
{"id": "log_kelly_result_1974298326560", "timestamp": 1766227750347.622, "location": "kelly_calculator.py:224", "message": "kelly fraction result", "data": {"kelly_fraction": 0.008544834413696491, "result_type": "<class 'numpy.float64'>", "result_is_nan": false}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "A"}
{"id": "log_kelly_result_1974296057168", "timestamp": 1766227750348.3086, "location": "position_sizer.py:165", "message": "kelly fraction result", "data": {"symbol": "YFI/USDT", "kelly_fraction": 0.008544834413696491, "kelly_is_nan": false, "kelly_type": "<class 'numpy.float64'>"}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "A"}
{"id": "log_equity_curve_check_1974296057168", "timestamp": 1766227750348.4873, "location": "position_sizer.py:168", "message": "equity curve check", "data": {"symbol": "YFI/USDT", "equity_curve_is_none": false, "equity_curve_len": 360, "equity_curve_type": "<class 'pandas.core.series.Series'>", "has_iloc": true}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "J"}
{"id": "log_equity_access_start_1974296057168", "timestamp": 1766227750348.6423, "location": "position_sizer.py:171", "message": "equity curve access start", "data": {"symbol": "YFI/USDT", "has_iloc": true}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "J"}
{"id": "log_equity_values_1974296057168", "timestamp": 1766227750348.758, "location": "position_sizer.py:173", "message": "equity values extracted", "data": {"symbol": "YFI/USDT", "initial_capital": 10000.0, "final_equity": 10003.656496902799, "initial_capital_type": "<class 'numpy.float64'>"}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "H1"}
{"id": "log_cumulative_perf_before_1974296057168", "timestamp": 1766227750348.8237, "location": "position_sizer.py:176", "message": "cumulative performance before multiplier calc", "data": {"symbol": "YFI/USDT", "cumulative_performance": 0.0003656496902798608, "cumulative_perf_type": "<class 'numpy.float64'>"}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "H1"}
{"id": "log_cumulative_perf_after_1974296057168", "timestamp": 1766227750348.904, "location": "position_sizer.py:186", "message": "cumulative performance multiplier calculated", "data": {"symbol": "YFI/USDT", "cumulative_performance": 0.0003656496902798608, "cumulative_performance_multiplier": 1.00036564969028}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "H1"}
{"id": "log_adjust_before_1974296057168", "timestamp": 1766227750349.3337, "location": "position_sizer.py:193", "message": "before kelly adjustment", "data": {"symbol": "YFI/USDT", "kelly_fraction": 0.008544834413696491, "regime_multiplier": 1.0, "cumulative_performance_multiplier": 1.00036564969028, "kelly_is_nan": false}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "H4"}
{"id": "log_adjust_after_multiply_1974296057168", "timestamp": 1766227750349.691, "location": "position_sizer.py:194", "message": "after kelly multiply", "data": {"symbol": "YFI/USDT", "adjusted_kelly_fraction": 0.008547958829753352, "adjusted_is_nan": false}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "H4"}
{"id": "log_adjust_after_bounds_1974296057168", "timestamp": 1766227750349.8137, "location": "position_sizer.py:206", "message": "after kelly bounds", "data": {"symbol": "YFI/USDT", "adjusted_before": 0.008547958829753352, "adjusted_after": 0.01, "min_position_size": 0.01, "max_position_size": 0.1, "was_clamped": true}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "I"}
{"id": "log_portfolio_exposure_1974296057168", "timestamp": 1766227750350.611, "location": "position_sizer.py:303", "message": "portfolio exposure check", "data": {"total_exposure": 0.01, "max_portfolio_exposure": 0.5, "num_results": 1, "exceeds_max": false}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "D"}
{"id": "log_validate_start_2192664738688", "timestamp": 1766228041940.7363, "location": "data_loader.py:173", "message": "validate_symbols start", "data": {"num_symbols": 1, "symbols_type": "<class 'list'>"}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "E"}
{"id": "log_signal_conversion_2192664665216", "timestamp": 1766228042135.9429, "location": "position_sizer.py:278", "message": "signal type conversion", "data": {"symbol": "YFI/USDT", "signal": 1, "signal_type": "<class 'int'>"}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "F"}
{"id": "log_signal_result_2192664665216", "timestamp": 1766228042136.719, "location": "position_sizer.py:283", "message": "signal type result", "data": {"symbol": "YFI/USDT", "original_signal": 1, "converted_signal_type": "LONG"}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "F"}
{"id": "log_data_fetch_start_2192664483152", "timestamp": 1766228042137.9287, "location": "position_sizer.py:128", "message": "data fetch start", "data": {"symbol": "YFI/USDT", "lookback_candles": 600, "timeframe": "1h"}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "G"}
{"id": "log_data_fetch_result_2192664483152", "timestamp": 1766228044908.2268, "location": "position_sizer.py:135", "message": "data fetch result", "data": {"symbol": "YFI/USDT", "df_is_none": false, "df_empty": false, "df_len": 600, "df_columns": ["open", "high", "low", "close", "volume"]}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "G"}
{"id": "log_regime_detect_start_2192664483152", "timestamp": 1766228044908.635, "location": "position_sizer.py:141", "message": "regime detection start", "data": {"symbol": "YFI/USDT", "timeframe": "1h", "limit": 600}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "C"}
{"id": "log_hmm_result_2192664483488", "timestamp": 1766228045091.511, "location": "regime_detector.py:106", "message": "HMM result received", "data": {"symbol": "YFI/USDT", "next_state": 0, "next_state_type": "<class 'int'>", "result_type": "<class 'modules.hmm.core.swings.models.HMM_SWINGS'>", "result_has_next_state": true}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "C"}
{"id": "log_regime_detected_2192664483152", "timestamp": 1766228045091.7063, "location": "position_sizer.py:147", "message": "regime detected", "data": {"symbol": "YFI/USDT", "regime": "NEUTRAL", "regime_type": "<class 'str'>", "regime_is_none": false, "regime_in_multipliers": true}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "C"}
{"id": "log_regime_multiplier_2192664483152", "timestamp": 1766228045091.834, "location": "position_sizer.py:149", "message": "regime multiplier", "data": {"symbol": "YFI/USDT", "regime": "NEUTRAL", "regime_multiplier": 1.0}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "C"}
{"id": "log_backtest_start_2192664483152", "timestamp": 1766228045092.0374, "location": "position_sizer.py:152", "message": "backtest start", "data": {"symbol": "YFI/USDT", "signal_type": "LONG", "lookback_candles": 600}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "B"}
{"id": "log_validate_start_2534711047552", "timestamp": 1766228704319.312, "location": "data_loader.py:173", "message": "validate_symbols start", "data": {"num_symbols": 1, "symbols_type": "<class 'list'>"}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "E"}
{"id": "log_signal_conversion_2534572143488", "timestamp": 1766228704501.4316, "location": "position_sizer.py:278", "message": "signal type conversion", "data": {"symbol": "YFI/USDT", "signal": 1, "signal_type": "<class 'int'>"}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "F"}
{"id": "log_signal_result_2534572143488", "timestamp": 1766228704501.8972, "location": "position_sizer.py:283", "message": "signal type result", "data": {"symbol": "YFI/USDT", "original_signal": 1, "converted_signal_type": "LONG"}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "F"}
{"id": "log_data_fetch_start_2534710924624", "timestamp": 1766228704502.87, "location": "position_sizer.py:128", "message": "data fetch start", "data": {"symbol": "YFI/USDT", "lookback_candles": 600, "timeframe": "1h"}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "G"}
{"id": "log_data_fetch_result_2534710924624", "timestamp": 1766228706232.7922, "location": "position_sizer.py:135", "message": "data fetch result", "data": {"symbol": "YFI/USDT", "df_is_none": false, "df_empty": false, "df_len": 600, "df_columns": ["open", "high", "low", "close", "volume"]}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "G"}
{"id": "log_regime_detect_start_2534710924624", "timestamp": 1766228706233.7673, "location": "position_sizer.py:141", "message": "regime detection start", "data": {"symbol": "YFI/USDT", "timeframe": "1h", "limit": 600}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "C"}
{"id": "log_hmm_result_2534710924960", "timestamp": 1766228706418.9084, "location": "regime_detector.py:106", "message": "HMM result received", "data": {"symbol": "YFI/USDT", "next_state": 0, "next_state_type": "<class 'int'>", "result_type": "<class 'modules.hmm.core.swings.models.HMM_SWINGS'>", "result_has_next_state": true}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "C"}
{"id": "log_regime_detected_2534710924624", "timestamp": 1766228706419.122, "location": "position_sizer.py:147", "message": "regime detected", "data": {"symbol": "YFI/USDT", "regime": "NEUTRAL", "regime_type": "<class 'str'>", "regime_is_none": false, "regime_in_multipliers": true}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "C"}
{"id": "log_regime_multiplier_2534710924624", "timestamp": 1766228706419.2666, "location": "position_sizer.py:149", "message": "regime multiplier", "data": {"symbol": "YFI/USDT", "regime": "NEUTRAL", "regime_multiplier": 1.0}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "C"}
{"id": "log_backtest_start_2534710924624", "timestamp": 1766228706419.49, "location": "position_sizer.py:152", "message": "backtest start", "data": {"symbol": "YFI/USDT", "signal_type": "LONG", "lookback_candles": 600}, "sessionId": "debug-session", "runId": "run1", "hypothesisId": "B"}
